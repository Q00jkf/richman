<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé© RichMan Â§ßÂØåÁøÅÈÅäÊà≤ - Èõ≤Á´ØÁâà</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft JhengHei', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            height: 100vh;
            overflow: hidden;
        }
        
        /* ‰∏ªË¶Å‰ΩàÂ±ÄÂÆπÂô® */
        .game-container {
            display: grid;
            grid-template-areas: 
                "header header header"
                "sidebar main info"
                "logs logs logs";
            grid-template-rows: 80px 1fr 180px;
            grid-template-columns: 250px 1fr 300px;
            height: 100vh;
            gap: 15px;
            padding: 15px;
        }
        
        /* È†ÇÈÉ®ÁãÄÊÖãÊ¨Ñ */
        .header {
            grid-area: header;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px 25px;
            backdrop-filter: blur(10px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .header-left {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            font-size: 14px;
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #28a745;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .id-display {
            background: rgba(255, 193, 7, 0.2);
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 13px;
            border: 1px solid rgba(255, 193, 7, 0.4);
        }
        
        .id-label {
            opacity: 0.8;
            margin-right: 5px;
        }
        
        .id-value {
            font-weight: bold;
            color: #ffc107;
        }
        
        /* Â∑¶ÂÅ¥ÈÇäÊ¨Ñ - Áé©ÂÆ∂ÊéßÂà∂Âè∞ */
        .sidebar {
            grid-area: sidebar;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 0;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        .tab-header {
            display: flex;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px 12px 0 0;
        }
        
        .tab-button {
            flex: 1;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            border-radius: 0;
        }
        
        .tab-button:first-child {
            border-radius: 12px 0 0 0;
        }
        
        .tab-button:last-child {
            border-radius: 0 12px 0 0;
        }
        
        .tab-button.active {
            background: rgba(255, 193, 7, 0.3);
            font-weight: bold;
            color: #ffc107;
        }
        
        .tab-button:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .tab-content {
            padding: 20px;
            height: calc(100% - 48px);
            overflow-y: auto;
        }
        
        .tab-panel {
            display: none;
        }
        
        .tab-panel.active {
            display: block;
        }
        
        .tab-panel h3 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 18px;
            color: #ffc107;
            border-bottom: 2px solid rgba(255, 193, 7, 0.3);
            padding-bottom: 10px;
        }
        
        .control-section {
            margin-bottom: 25px;
        }
        
        .control-section h4 {
            font-size: 14px;
            margin-bottom: 12px;
            opacity: 0.9;
            border-left: 3px solid #ffc107;
            padding-left: 10px;
        }
        
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 15px;
        }
        
        .input-row {
            display: flex;
            gap: 8px;
        }
        
        input {
            flex: 1;
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 13px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        input:focus {
            outline: none;
            border-color: #ffc107;
            box-shadow: 0 0 0 2px rgba(255, 193, 7, 0.2);
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            font-size: 13px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-1px);
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #ffc107, #ff8c00);
            color: #333;
            font-weight: 500;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #ffcd39, #ffa500);
        }
        
        /* ‰∏ªË¶ÅÈÅäÊà≤ÂçÄÂüü */
        .main-game {
            grid-area: main;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 25px;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            display: flex;
            gap: 20px;
        }
        
        /* ÁãÄÊ≥ÅÊ¨Ñ‰Ωç */
        .status-panel {
            flex: 2;
            background: rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            padding: 20px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .status-panel h3 {
            text-align: center;
            font-size: 20px;
            margin-bottom: 20px;
            color: #ffc107;
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .status-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .status-label {
            font-size: 12px;
            opacity: 0.8;
            margin-bottom: 5px;
        }
        
        .status-value {
            font-size: 18px;
            font-weight: bold;
            color: #ffc107;
        }
        
        .money-display {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, rgba(40, 167, 69, 0.3), rgba(34, 139, 58, 0.3));
            border: 2px solid rgba(40, 167, 69, 0.5);
        }
        
        .money-display .status-value {
            font-size: 24px;
            color: #28a745;
        }
        
        .properties-list {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            max-height: 120px;
            overflow-y: auto;
        }
        
        .property-item {
            padding: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin-bottom: 5px;
            font-size: 13px;
            display: flex;
            justify-content: space-between;
        }
        
        /* Êìç‰ΩúÊåâÈàïÂçÄ */
        .action-panel {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .game-button {
            padding: 20px;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            text-transform: none;
        }
        
        .dice-button {
            background: linear-gradient(135deg, #ff6b6b, #ee5a52);
            color: white;
            font-size: 18px;
        }
        
        .dice-button:hover {
            background: linear-gradient(135deg, #ff5252, #e53935);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 107, 0.4);
        }
        
        .skill-button {
            background: linear-gradient(135deg, #4ecdc4, #44a08d);
            color: white;
        }
        
        .skill-button:hover {
            background: linear-gradient(135deg, #26c6da, #00acc1);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(78, 205, 196, 0.4);
        }
        
        .end-turn-button {
            background: linear-gradient(135deg, #ffc107, #ff8c00);
            color: #333;
        }
        
        .end-turn-button:hover {
            background: linear-gradient(135deg, #ffcd39, #ffa500);
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 193, 7, 0.4);
        }
        
        .game-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        /* Âè≥ÂÅ¥‰ø°ÊÅØÊ¨Ñ */
        .info-panel {
            grid-area: info;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .info-section {
            margin-bottom: 25px;
        }
        
        .info-section h4 {
            font-size: 16px;
            margin-bottom: 15px;
            color: #ffc107;
            border-bottom: 1px solid rgba(255, 193, 7, 0.3);
            padding-bottom: 8px;
        }
        
        .game-state-display {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            font-size: 14px;
            line-height: 1.6;
        }
        
        .rooms-list {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .room-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 6px;
            margin-bottom: 8px;
            font-size: 13px;
        }
        
        .room-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .room-info {
            opacity: 0.8;
            font-size: 12px;
        }
        
        /* Â∫ïÈÉ®Êó•Ë™åÂçÄ */
        .logs {
            grid-area: logs;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 12px;
            padding: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .logs h4 {
            margin-bottom: 10px;
            color: #ffc107;
            font-size: 16px;
        }
        
        .log-content {
            height: 120px;
            overflow-y: auto;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 10px;
            font-family: 'Courier New', monospace;
            font-size: 13px;
            line-height: 1.4;
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding: 3px 6px;
            border-radius: 3px;
        }
        
        .log-entry.info {
            background: rgba(23, 162, 184, 0.2);
        }
        
        .log-entry.success {
            background: rgba(40, 167, 69, 0.2);
        }
        
        .log-entry.error {
            background: rgba(220, 53, 69, 0.2);
        }
        
        .log-entry.game {
            background: rgba(255, 193, 7, 0.2);
        }
        
        /* Âπ≥ÊùøÈüøÊáâÂºèË®≠Ë®à */
        @media (max-width: 1200px) {
            .game-container {
                grid-template-areas: 
                    "header"
                    "sidebar"
                    "main"
                    "info"
                    "logs";
                grid-template-rows: 60px 250px auto 180px 120px;
                grid-template-columns: 1fr;
                padding: 8px;
                gap: 8px;
                height: auto;
                min-height: 100vh;
            }
            
            .sidebar {
                max-height: 250px;
                overflow-y: auto;
            }
            
            .info-panel {
                max-height: 180px;
                overflow-y: auto;
            }
            
            .main-game {
                flex-direction: column;
                gap: 15px;
                min-height: auto;
            }
            
            .status-panel {
                flex: 1;
                min-height: 300px;
            }
            
            .action-panel {
                flex: none;
                flex-direction: row;
                gap: 10px;
            }
            
            .game-button {
                padding: 15px;
                font-size: 14px;
                flex: 1;
            }
            
            .tab-button {
                font-size: 12px;
                padding: 8px 12px;
            }
            
            .tab-content {
                height: calc(100% - 36px);
            }
            
            .logs {
                max-height: 120px;
            }
            
            .log-content {
                height: 80px;
            }
        }
        
        /* ÊâãÊ©üÈüøÊáâÂºèË®≠Ë®à */
        @media (max-width: 768px) {
            body {
                overflow: auto;
            }
            
            .game-container {
                grid-template-areas: 
                    "header"
                    "sidebar"
                    "main"
                    "info"
                    "logs";
                grid-template-rows: auto auto auto auto auto;
                grid-template-columns: 1fr;
                padding: 5px;
                gap: 8px;
                height: auto;
                min-height: 100vh;
            }
            
            .header {
                padding: 8px 12px;
                flex-direction: column;
                gap: 8px;
                text-align: center;
            }
            
            .header-left h2 {
                font-size: 16px;
                margin: 0;
            }
            
            .header-right {
                flex-wrap: wrap;
                gap: 6px;
                justify-content: center;
            }
            
            .id-display {
                font-size: 10px;
                padding: 3px 6px;
            }
            
            .sidebar {
                max-height: 280px;
                overflow-y: auto;
            }
            
            .tab-content {
                padding: 12px;
                height: calc(100% - 36px);
            }
            
            .main-game {
                flex-direction: column;
                gap: 12px;
                padding: 15px;
                min-height: auto;
            }
            
            .status-panel {
                min-height: 250px;
                padding: 15px;
            }
            
            .status-grid {
                grid-template-columns: 1fr 1fr;
                gap: 8px;
                margin-bottom: 15px;
            }
            
            .money-display {
                grid-column: 1 / -1;
            }
            
            .properties-list {
                max-height: 80px;
                padding: 10px;
            }
            
            .action-panel {
                flex-direction: column;
                gap: 8px;
            }
            
            .game-button {
                padding: 12px;
                font-size: 14px;
                width: 100%;
            }
            
            .info-panel {
                max-height: 200px;
                overflow-y: auto;
                padding: 15px;
            }
            
            .info-section {
                margin-bottom: 15px;
            }
            
            .rooms-list {
                max-height: 120px;
                padding: 10px;
            }
            
            .logs {
                max-height: 150px;
                padding: 10px;
            }
            
            .log-content {
                height: 100px;
                font-size: 11px;
            }
            
            .control-section {
                margin-bottom: 15px;
            }
            
            .input-group {
                gap: 6px;
                margin-bottom: 10px;
            }
            
            .input-row {
                gap: 6px;
                flex-wrap: wrap;
            }
            
            .btn {
                padding: 8px 12px;
                font-size: 12px;
                flex: 1;
                min-width: 80px;
            }
        }
        
        /* Ë∂ÖÂ∞èËû¢ÂπïÂÑ™Âåñ */
        @media (max-width: 480px) {
            .header-right {
                grid-template-columns: 1fr 1fr;
                gap: 4px;
            }
            
            .id-display {
                font-size: 9px;
                padding: 2px 4px;
            }
            
            .status-grid {
                grid-template-columns: 1fr;
                gap: 6px;
            }
            
            .game-button {
                padding: 10px;
                font-size: 13px;
            }
            
            .tab-button {
                font-size: 11px;
                padding: 6px 8px;
            }
            
            .btn {
                font-size: 11px;
                padding: 6px 10px;
            }
            
            .input-row {
                flex-direction: column;
            }
            
            .room-item {
                padding: 8px;
                font-size: 12px;
            }
            
            .log-content {
                font-size: 10px;
                height: 80px;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <!-- È†ÇÈÉ®ÁãÄÊÖãÊ¨Ñ -->
        <div class="header">
            <div class="header-left">
                <h2>üé© RichMan Èõ≤Á´ØÁâà</h2>
                <div class="status-indicator">
                    <div class="status-dot"></div>
                    <span id="connectionStatus">ÈÄ£Êé•‰∏≠</span>
                </div>
            </div>
            <div class="header-right">
                <div class="id-display">
                    <span class="id-label">Socket:</span>
                    <span class="id-value" id="socketId">-</span>
                </div>
                <div class="id-display">
                    <span class="id-label">Áé©ÂÆ∂:</span>
                    <span class="id-value" id="playerId">-</span>
                </div>
                <div class="id-display">
                    <span class="id-label">ÊàøÈñì:</span>
                    <span class="id-value" id="roomId">-</span>
                </div>
                <div class="id-display">
                    <span class="id-label">ÈöéÊÆµ:</span>
                    <span class="id-value" id="gamePhase">Á≠âÂæÖ</span>
                </div>
            </div>
        </div>

        <!-- Â∑¶ÂÅ¥ÈÇäÊ¨Ñ -->
        <div class="sidebar">
            <div class="tab-header">
                <button class="tab-button active" onclick="switchTab(0)">Áé©ÂÆ∂ÊéßÂà∂Âè∞</button>
                <button class="tab-button" onclick="switchTab(1)">ÁãÄÊÖãÁõ£Êéß</button>
            </div>
            
            <div class="tab-content">
                <!-- Áé©ÂÆ∂ÊéßÂà∂Âè∞Ê®ôÁ±§È†Å -->
                <div class="tab-panel active" id="tab-panel-0">
                    <h3>Áé©ÂÆ∂ÊéßÂà∂Âè∞</h3>
                    
                    <div class="control-section">
                        <h4>Áé©ÂÆ∂Ë®≠ÂÆö</h4>
                        <div class="input-group">
                            <input type="text" id="playerName" placeholder="Ëº∏ÂÖ•Áé©ÂÆ∂ÂêçÁ®±" value="">
                            <button class="btn btn-primary" onclick="createPlayer()">ÂâµÂª∫Áé©ÂÆ∂</button>
                        </div>
                    </div>
                    
                    <div class="control-section">
                        <h4>ÊàøÈñìÁÆ°ÁêÜ</h4>
                        <div class="input-group">
                            <input type="text" id="roomName" placeholder="Ëº∏ÂÖ•ÊàøÈñìÂêçÁ®±" value="">
                            <div class="input-row">
                                <button class="btn" onclick="createRoom()">ÂâµÂª∫ÊàøÈñì</button>
                                <button class="btn" onclick="startGame()">ÈñãÂßãÈÅäÊà≤</button>
                            </div>
                        </div>
                        <div class="input-group">
                            <input type="text" id="joinRoomId" placeholder="Ëº∏ÂÖ•ÊàøÈñìIDÂä†ÂÖ•">
                            <div class="input-row">
                                <button class="btn" onclick="joinRoom()">Âä†ÂÖ•ÊàøÈñì</button>
                                <button class="btn" onclick="leaveRoom()">Èõ¢ÈñãÊàøÈñì</button>
                            </div>
                        </div>
                    </div>
                    
                    <div class="control-section">
                        <h4>Á≥ªÁµ±Êìç‰Ωú</h4>
                        <div class="input-row">
                            <button class="btn" onclick="getRooms()">Âà∑Êñ∞ÊàøÈñì</button>
                            <button class="btn" onclick="getGameState()">Áç≤ÂèñÁãÄÊÖã</button>
                            <button class="btn" onclick="clearLog()">Ê∏ÖÈô§Êó•Ë™å</button>
                        </div>
                        <div class="input-row" style="margin-top: 10px;">
                            <button class="btn btn-primary" onclick="testConnection()">Ê∏¨Ë©¶ÈÄ£Êé•</button>
                            <button class="btn" onclick="reconnect()">ÈáçÊñ∞ÈÄ£Êé•</button>
                        </div>
                    </div>
                </div>
                
                <!-- ÁãÄÊÖãÁõ£ÊéßÊ®ôÁ±§È†Å -->
                <div class="tab-panel" id="tab-panel-1">
                    <h3>ÁãÄÊÖãÁõ£Êéß</h3>
                    
                    <div class="control-section">
                        <h4>üë§ ÊàëÁöÑÁãÄÊÖã</h4>
                        <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 8px; font-size: 12px; line-height: 1.4;">
                            <div><strong>Áé©ÂÆ∂ID:</strong> <span id="debugMyPlayerId">-</span></div>
                            <div><strong>ÈáëÈå¢:</strong> <span id="debugMyMoney">$1500</span></div>
                            <div><strong>‰ΩçÁΩÆ:</strong> <span id="debugMyPosition">Ëµ∑Èªû</span></div>
                            <div><strong>Âπ¥ÈΩ°:</strong> <span id="debugMyAge">1</span>Ê≠≤</div>
                            <div><strong>ËÅ∑Ê•≠:</strong> <span id="debugMyProfession">ÁÑ°Ê•≠</span></div>
                            <div><strong>Âπ¥Ëñ™:</strong> <span id="debugMySalary">$1000</span></div>
                            <div><strong>È™∞Â≠êÊ¨°Êï∏:</strong> <span id="debugMyDiceCount">0</span>/5</div>
                            <div><strong>Âú∞Áî¢Êï∏:</strong> <span id="debugMyProperties">0</span></div>
                            <div><strong>ÊäÄËÉΩÂç°:</strong> <span id="debugMySkills">0</span></div>
                        </div>
                    </div>
                    
                    <div class="control-section">
                        <h4>üìä ÈÄ£Á∑öÁãÄÊÖã</h4>
                        <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 8px; font-size: 12px; line-height: 1.4;">
                            <div><strong>SocketÁãÄÊÖã:</strong> <span id="debugSocketStatus">Êú™ÈÄ£Êé•</span></div>
                            <div><strong>ÂÇ≥Ëº∏ÊñπÂºè:</strong> <span id="debugTransport">-</span></div>
                            <div><strong>Âª∂ÈÅ≤:</strong> <span id="debugLatency">-</span></div>
                            <div><strong>ÈáçÈÄ£Ê¨°Êï∏:</strong> <span id="debugReconnects">0</span></div>
                        </div>
                    </div>
                    
                    <div class="control-section">
                        <h4>üåê ÈÉ®ÁΩ≤Ë≥áË®ä</h4>
                        <div style="background: rgba(255, 255, 255, 0.1); padding: 15px; border-radius: 8px; font-size: 12px; line-height: 1.4;">
                            <div><strong>Âπ≥Âè∞:</strong> Render.com</div>
                            <div><strong>Á∂≤ÂùÄ:</strong> <span id="currentURL">-</span></div>
                            <div><strong>ÁâàÊú¨:</strong> v1.0 Èõ≤Á´ØÁâà</div>
                            <div><strong>ÂçîË≠∞:</strong> WebSocket + HTTP</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ‰∏ªË¶ÅÈÅäÊà≤ÂçÄÂüü -->
        <div class="main-game">
            <!-- ÁãÄÊ≥ÅÊ¨Ñ‰Ωç -->
            <div class="status-panel">
                <h3>ÁãÄÊ≥ÅÊ¨Ñ‰Ωç</h3>
                <div class="status-grid">
                    <div class="status-item money-display">
                        <div class="status-label">üí∞ ÈáëÈå¢</div>
                        <div class="status-value" id="playerMoney">$1500</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">üìç ‰ΩçÁΩÆ</div>
                        <div class="status-value" id="playerPosition">Ëµ∑Èªû</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">üéÇ Âπ¥ÈΩ°</div>
                        <div class="status-value" id="playerAge">1Ê≠≤</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">üé≤ ÊäïÈ™∞</div>
                        <div class="status-value" id="diceCount">0/5</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">üíº ËÅ∑Ê•≠</div>
                        <div class="status-value" id="playerProfession">ÁÑ°Ê•≠</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">üíµ Âπ¥Ëñ™</div>
                        <div class="status-value" id="playerSalary">$1000</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">üè† Âú∞Áî¢</div>
                        <div class="status-value" id="propertyCount">0</div>
                    </div>
                    <div class="status-item">
                        <div class="status-label">üé¥ ÊäÄËÉΩÂç°</div>
                        <div class="status-value" id="skillCardCount">0</div>
                    </div>
                </div>
                <div class="properties-list">
                    <div style="text-align: center; opacity: 0.7; padding: 20px;">
                        Â∞öÊú™ÊìÅÊúâ‰ªª‰ΩïÂú∞Áî¢
                    </div>
                </div>
            </div>

            <!-- Êìç‰ΩúÊåâÈàïÂçÄ -->
            <div class="action-panel">
                <button class="game-button dice-button" id="rollDiceBtn" onclick="rollDice()" disabled>
                    üé≤ ÊäïÈ™∞Â≠ê
                </button>
                <button class="game-button skill-button" onclick="showSkills()">
                    üé¥ ÊäÄËÉΩÂç°
                </button>
                <button class="game-button end-turn-button" id="endTurnBtn" onclick="endTurn()" disabled>
                    ‚è≠Ô∏è ÁµêÊùüÂõûÂêà
                </button>
            </div>
        </div>

        <!-- Âè≥ÂÅ¥‰ø°ÊÅØÊ¨Ñ -->
        <div class="info-panel">
            <div class="info-section">
                <h4>üë• Â∞çÊâãË≥áË®ä</h4>
                <div class="opponents-info" id="opponentsInfo">
                    Á≠âÂæÖÂÖ∂‰ªñÁé©ÂÆ∂Âä†ÂÖ•...
                </div>
            </div>
            
            <div class="info-section">
                <h4>üè† ÂèØÁî®ÊàøÈñì</h4>
                <div class="rooms-list" id="roomsList">
                    ËºâÂÖ•‰∏≠...
                </div>
            </div>
        </div>

        <!-- Â∫ïÈÉ®Êó•Ë™åÂçÄ -->
        <div class="logs">
            <h4>üìã ÈÅäÊà≤Êó•Ë™å</h4>
            <div class="log-content" id="logContent">
                <div class="log-entry info">[Á≥ªÁµ±] RichMan Èõ≤Á´ØÁâàÊú¨ÂàùÂßãÂåñ...</div>
            </div>
        </div>
    </div>

    <!-- Socket.IO ÂÆ¢Êà∂Á´ØÂ∫´ -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    
    <script>
        // ÂÖ®ÂüüËÆäÊï∏
        let socket;
        let currentPlayerId = null;
        let currentRoomId = null;
        let isMyTurn = false;
        let currentGameState = null;
        let reconnectCount = 0;
        let playerData = {
            money: 1500,
            position: 0,
            properties: [],
            skillCards: [],
            age: 1,
            profession: 'ÁÑ°Ê•≠',
            annualSalary: 1000,
            diceCount: 0
        };
        
        // DOM ÂÖÉÁ¥†
        const connectionStatusEl = document.getElementById('connectionStatus');
        const logContentEl = document.getElementById('logContent');
        const socketIdEl = document.getElementById('socketId');
        const playerIdEl = document.getElementById('playerId');
        const roomIdEl = document.getElementById('roomId');
        const gamePhaseEl = document.getElementById('gamePhase');
        const rollDiceBtn = document.getElementById('rollDiceBtn');
        const endTurnBtn = document.getElementById('endTurnBtn');
        const opponentsInfoEl = document.getElementById('opponentsInfo');
        const roomsList = document.getElementById('roomsList');
        
        // ÁîüÊàêÈö®Ê©üÁé©ÂÆ∂ÂêçÁ®±
        const playerNames = ['Â∞èÊòé', 'Â∞èËèØ', 'Â∞èÁæé', 'Â∞èÂº∑', 'Â∞èËéâ', 'Â∞èÁéã', 'Â∞èÊùé', 'Â∞èÈô≥'];
        const randomName = playerNames[Math.floor(Math.random() * playerNames.length)] + Math.floor(Math.random() * 100);
        document.getElementById('playerName').value = randomName;
        document.getElementById('roomName').value = randomName + 'ÁöÑÊàøÈñì';
        
        // È°ØÁ§∫Áï∂ÂâçÁ∂≤ÂùÄ
        document.getElementById('currentURL').textContent = window.location.origin;
        
        // Êó•Ë™åÂáΩÊï∏
        function addLog(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type}`;
            logEntry.innerHTML = `[${timestamp}] ${message}`;
            logContentEl.appendChild(logEntry);
            logContentEl.scrollTop = logContentEl.scrollHeight;
            console.log(message);
        }
        
        function clearLog() {
            logContentEl.innerHTML = '';
            addLog('üìã Êó•Ë™åÂ∑≤Ê∏ÖÈô§', 'info');
        }
        
        function updateConnectionStatus(status, type) {
            connectionStatusEl.textContent = status;
        }
        
        function updateStats() {
            socketIdEl.textContent = socket?.id?.substring(0, 8) || '-';
            playerIdEl.textContent = currentPlayerId?.substring(0, 8) || '-';
            roomIdEl.textContent = currentRoomId?.substring(0, 8) || '-';
            updateDebugInfo();
        }
        
        // Ê®ôÁ±§È†ÅÂàáÊèõÂäüËÉΩ
        function switchTab(tabIndex) {
            document.querySelectorAll('.tab-button').forEach((btn, index) => {
                btn.classList.toggle('active', index === tabIndex);
            });
            
            document.querySelectorAll('.tab-panel').forEach((panel, index) => {
                panel.classList.toggle('active', index === tabIndex);
            });
            
            if (tabIndex === 1) {
                updateDebugInfo();
            }
        }
        
        // Êõ¥Êñ∞Â∞çÊâãË≥áË®ä
        function updateOpponentsInfo() {
            const opponentsInfoEl = document.getElementById('opponentsInfo');
            if (!currentGameState || !currentGameState.players) {
                opponentsInfoEl.innerHTML = 'Á≠âÂæÖÂÖ∂‰ªñÁé©ÂÆ∂Âä†ÂÖ•...';
                return;
            }
            
            const opponents = currentGameState.players.filter(p => p.id !== currentPlayerId);
            if (opponents.length === 0) {
                opponentsInfoEl.innerHTML = 'Á≠âÂæÖÂÖ∂‰ªñÁé©ÂÆ∂Âä†ÂÖ•...';
                return;
            }
            
            let html = '';
            opponents.forEach((opponent, index) => {
                // ‰ΩøÁî®ÂØ¶ÈöõÁöÑ‰º∫ÊúçÂô®ÂêåÊ≠•Ë≥áÊñô
                const age = opponent.age || 1;
                const diceCount = opponent.diceCount || 0;
                const profession = opponent.profession || 'ÁÑ°Ê•≠';
                const salary = opponent.annualSalary || 1000;
                
                html += `
                    <div style="background: rgba(255, 255, 255, 0.1); padding: 12px; border-radius: 8px; margin-bottom: 10px; font-size: 13px; line-height: 1.4;">
                        <div style="color: #ffc107; font-weight: bold; margin-bottom: 8px;">üë§ ${opponent.name}</div>
                        <div><strong>üí∞ ÈáëÈå¢:</strong> $${opponent.money || 1500}</div>
                        <div><strong>üìç ‰ΩçÁΩÆ:</strong> ${getBoardSpaceName(opponent.position || 0)}</div>
                        <div><strong>üéÇ Âπ¥ÈΩ°:</strong> ${age}Ê≠≤</div>
                        <div><strong>üíº ËÅ∑Ê•≠:</strong> ${profession}</div>
                        <div><strong>üíµ Âπ¥Ëñ™:</strong> $${salary}</div>
                        <div><strong>üé≤ È™∞Â≠ê:</strong> ${diceCount}/5</div>
                    </div>
                `;
            });
            
            opponentsInfoEl.innerHTML = html;
        }
        
        // Êõ¥Êñ∞DebugË≥áË®ä
        function updateDebugInfo() {
            // ÈÄ£Á∑öÁãÄÊÖã
            document.getElementById('debugSocketStatus').textContent = 
                socket?.connected ? 'Â∑≤ÈÄ£Êé•' : 'Êú™ÈÄ£Êé•';
            
            document.getElementById('debugTransport').textContent = 
                socket?.io?.engine?.transport?.name || '-';
                
            document.getElementById('debugReconnects').textContent = reconnectCount;
            
            // ÊàëÁöÑÁãÄÊÖã
            if (currentGameState) {
                const myPlayer = currentGameState.players?.find(p => p.id === currentPlayerId);
                if (myPlayer) {
                    document.getElementById('debugMyMoney').textContent = `$${myPlayer.money || 1500}`;
                    document.getElementById('debugMyPosition').textContent = getBoardSpaceName(myPlayer.position || 0);
                    document.getElementById('debugMyAge').textContent = myPlayer.age || 1;
                    document.getElementById('debugMyProfession').textContent = myPlayer.profession || 'ÁÑ°Ê•≠';
                    document.getElementById('debugMySalary').textContent = `$${myPlayer.annualSalary || 1000}`;
                    document.getElementById('debugMyDiceCount').textContent = myPlayer.diceCount || 0;
                    document.getElementById('debugMyProperties').textContent = (myPlayer.properties || []).length;
                    document.getElementById('debugMySkills').textContent = (myPlayer.skillCards || []).length;
                    
                    // ÂêåÊ≠•Êú¨Âú∞playerData
                    playerData.age = myPlayer.age || 1;
                    playerData.profession = myPlayer.profession || 'ÁÑ°Ê•≠';
                    playerData.annualSalary = myPlayer.annualSalary || 1000;
                    playerData.diceCount = myPlayer.diceCount || 0;
                }
                
                // Êõ¥Êñ∞Â∞çÊâãË≥áË®ä
                updateOpponentsInfo();
            }
            
            // ÊàëÁöÑÁé©ÂÆ∂ID
            document.getElementById('debugMyPlayerId').textContent = 
                currentPlayerId?.substring(0, 12) || '-';
        }
        
        // Socket.IO ÂàùÂßãÂåñ
        function initSocket() {
            addLog('üîå Ê≠£Âú®ÈÄ£Êé•Âà∞Èõ≤Á´Ø‰º∫ÊúçÂô®...', 'info');
            
            const serverURL = window.location.origin;
            addLog(`üì° ÈÄ£Êé•Âà∞: ${serverURL}`, 'info');
            
            if (typeof io === 'undefined') {
                addLog('‚ùå Socket.IO Êú™ËºâÂÖ•ÔºÅ', 'error');
                return;
            }
            
            socket = io(serverURL, {
                transports: ['websocket', 'polling'],
                timeout: 10000,
                forceNew: true
            });
            
            setupSocketEvents();
        }
        
        function setupSocketEvents() {
            socket.on('connect', () => {
                addLog('‚úÖ Èõ≤Á´ØÈÄ£Êé•ÊàêÂäüÔºÅ', 'success');
                addLog(`üîó Socket ID: ${socket.id}`, 'success');
                updateConnectionStatus('Â∑≤ÈÄ£Êé•Èõ≤Á´Ø', 'connected');
                updateStats();
                getRooms();
                
                // Ëá™ÂãïÂâµÂª∫Áé©ÂÆ∂
                setTimeout(() => {
                    if (!currentPlayerId) {
                        createPlayer();
                    }
                }, 1000);
            });
            
            socket.on('disconnect', (reason) => {
                addLog(`‚ùå ÈÄ£Êé•‰∏≠Êñ∑: ${reason}`, 'error');
                updateConnectionStatus('ÈÄ£Êé•‰∏≠Êñ∑', 'error');
            });
            
            socket.on('connect_error', (error) => {
                addLog(`‚ùå ÈÄ£Êé•ÈåØË™§: ${error.message || error}`, 'error');
                updateConnectionStatus('ÈÄ£Êé•Â§±Êïó', 'error');
            });
            
            socket.on('reconnect', (attemptNumber) => {
                reconnectCount++;
                addLog(`üîÑ ÈáçÊñ∞ÈÄ£Êé•ÊàêÂäü (${reconnectCount})`, 'success');
                updateDebugInfo();
            });
            
            // ÈÅäÊà≤‰∫ã‰ª∂
            socket.on('authenticated', (data) => {
                if (data.success) {
                    currentPlayerId = data.player.id;
                    addLog(`üë§ Áé©ÂÆ∂ÂâµÂª∫ÊàêÂäü: ${data.player.name}`, 'success');
                    updateStats();
                }
            });
            
            socket.on('room_created', (data) => {
                if (data.success) {
                    currentRoomId = data.room.id;
                    addLog(`üè† ÊàøÈñìÂâµÂª∫ÊàêÂäü: ${data.room.name}`, 'success');
                    addLog(`üîë ÊàøÈñìID: ${data.room.id}`, 'info');
                    updateStats();
                    getRooms();
                } else {
                    addLog(`‚ùå ÊàøÈñìÂâµÂª∫Â§±Êïó: ${data.message}`, 'error');
                }
            });
            
            socket.on('room_joined', (data) => {
                if (data.success) {
                    currentRoomId = data.room.id;
                    addLog(`üö™ ÊàêÂäüÂä†ÂÖ•ÊàøÈñì: ${data.room.name}`, 'success');
                    addLog(`üë• ÊàøÈñìÁé©ÂÆ∂: ${data.room.players.length}/${data.room.maxPlayers}`, 'info');
                    updateStats();
                    getRooms();
                } else {
                    addLog(`‚ùå Âä†ÂÖ•ÊàøÈñìÂ§±Êïó: ${data.message}`, 'error');
                }
            });
            
            socket.on('game_started', (data) => {
                if (data.success) {
                    addLog('üéÆ ÈÅäÊà≤ÈñãÂßãÔºÅ', 'game');
                    gamePhaseEl.textContent = 'ÈÅäÊà≤‰∏≠';
                    if (data.gameState) {
                        updateGameState(data.gameState);
                    }
                }
            });
            
            socket.on('turn_started', (data) => {
                if (data.playerId === currentPlayerId) {
                    addLog(`üéØ Ëº™Âà∞‰Ω†‰∫ÜÔºÅÂõûÂêà ${data.roundNumber}`, 'game');
                    isMyTurn = true;
                    rollDiceBtn.disabled = false;
                    endTurnBtn.disabled = false;
                } else {
                    addLog(`üéØ Ëº™Âà∞ÂÖ∂‰ªñÁé©ÂÆ∂`, 'info');
                    isMyTurn = false;
                    rollDiceBtn.disabled = true;
                    endTurnBtn.disabled = true;
                }
                updateDebugInfo();
            });
            
            socket.on('dice_rolled', (data) => {
                const result = data.diceResult;
                addLog(`üé≤ ${data.playerName} Êì≤È™∞ÁµêÊûú: ${result.dice1} + ${result.dice2} = ${result.total}`, 'game');
                addLog(`üé≤ È™∞Â≠êË®àÊï∏: ${result.diceCount}/5`, 'info');
                
                // Â¶ÇÊûúÂπ¥ÈΩ°Â¢ûÂä†‰∫Ü
                if (result.ageIncreased) {
                    addLog(`üéÇ ${data.playerName} Âπ¥ÈΩ°Â¢ûÈï∑ÔºÅÊäïÊªø5Ê¨°È™∞Â≠ê`, 'game');
                }
                
                // Êõ¥Êñ∞Áï∂ÂâçÁé©ÂÆ∂ÁöÑÊú¨Âú∞ÁãÄÊÖã
                if (data.playerId === currentPlayerId) {
                    if (currentGameState) {
                        const myPlayer = currentGameState.players?.find(p => p.id === currentPlayerId);
                        if (myPlayer) {
                            myPlayer.diceCount = result.diceCount;
                            if (result.ageIncreased) {
                                myPlayer.age = (myPlayer.age || 1) + 1;
                                addLog(`üéÇ ÊÇ®ÁèæÂú® ${myPlayer.age} Ê≠≤‰∫ÜÔºÅ`, 'success');
                            }
                        }
                    }
                    updateDebugInfo();
                }
            });
            
            socket.on('player_moved', (data) => {
                addLog(`üö∂ ${data.playerName} ÁßªÂãï: ‰ΩçÁΩÆ ${data.oldPosition} ‚Üí ${data.newPosition}`, 'game');
                
                // Â¶ÇÊûúÊòØÁï∂ÂâçÁé©ÂÆ∂ÔºåÊõ¥Êñ∞‰ΩçÁΩÆÈ°ØÁ§∫
                if (data.playerId === currentPlayerId) {
                    updatePlayerPosition(data.newPosition);
                }
            });
            
            socket.on('player_aged', (data) => {
                addLog(`üéÇ ${data.playerName} Âπ¥ÈΩ°Â¢ûÂä†Âà∞ ${data.newAge} Ê≠≤ÔºåÁç≤ÂæóÂπ¥Ëñ™ $${data.salaryReceived}`, 'game');
                
                // Â¶ÇÊûúÊòØÁï∂ÂâçÁé©ÂÆ∂ÔºåÊõ¥Êñ∞ÁãÄÊÖãÈ°ØÁ§∫
                if (data.playerId === currentPlayerId) {
                    if (currentGameState) {
                        const myPlayer = currentGameState.players?.find(p => p.id === currentPlayerId);
                        if (myPlayer) {
                            myPlayer.age = data.newAge;
                            myPlayer.money += data.salaryReceived;
                            updatePlayerData(myPlayer);
                        }
                    }
                    updateDebugInfo();
                }
            });
            
            socket.on('players_status_update', (data) => {
                // ËôïÁêÜÁé©ÂÆ∂ÁãÄÊÖãÊõ¥Êñ∞‰∫ã‰ª∂ÔºåÁ¢∫‰øùÊâÄÊúâÁé©ÂÆ∂ÁãÄÊÖãÂêåÊ≠•
                if (data.players && currentGameState) {
                    currentGameState.players = data.players;
                    updateDebugInfo();
                    updateOpponentsInfo();
                    
                    // Êõ¥Êñ∞Áï∂ÂâçÁé©ÂÆ∂ÁöÑÁãÄÊÖãÈ°ØÁ§∫
                    const myPlayer = data.players.find(p => p.id === currentPlayerId);
                    if (myPlayer) {
                        updatePlayerData(myPlayer);
                    }
                }
            });
            
            socket.on('pong', (data) => {
                const latency = Date.now() - data.timestamp;
                addLog(`üèì PongÔºÅÂª∂ÈÅ≤: ${latency}ms`, 'success');
                document.getElementById('debugLatency').textContent = latency + 'ms';
            });
            
            socket.on('rooms_list', (data) => {
                if (data.success) {
                    displayRooms(data.rooms);
                }
            });
            
            socket.on('room_left', (data) => {
                if (data.success) {
                    currentRoomId = null;
                    addLog('üö™ ' + data.message, 'success');
                    updateStats();
                    getRooms();
                } else {
                    addLog('‚ùå Èõ¢ÈñãÊàøÈñìÂ§±Êïó: ' + data.message, 'error');
                }
            });
            
            socket.on('notification', (data) => {
                addLog('üì¢ ' + data.message, 'info');
            });
        }
        
        function updateGameState(gameState) {
            currentGameState = gameState;
            if (gameState) {
                // Êõ¥Êñ∞Áï∂ÂâçÁé©ÂÆ∂ÁöÑÁãÄÊÖã
                if (gameState.players && currentPlayerId) {
                    const currentPlayer = gameState.players.find(p => p.id === currentPlayerId);
                    if (currentPlayer) {
                        updatePlayerData(currentPlayer);
                    }
                }
                
                updateDebugInfo();
                updateOpponentsInfo();
            }
        }
        
        function updatePlayerData(playerData) {
            if (playerData) {
                // Êõ¥Êñ∞Áé©ÂÆ∂ÁãÄÊÖãÈ°ØÁ§∫
                document.getElementById('playerMoney').textContent = `$${playerData.money || 1500}`;
                document.getElementById('playerPosition').textContent = getBoardSpaceName(playerData.position || 0);
                document.getElementById('playerAge').textContent = `${playerData.age || 1}Ê≠≤`;
                document.getElementById('playerProfession').textContent = playerData.profession || 'ÁÑ°Ê•≠';
                document.getElementById('playerSalary').textContent = `$${playerData.annualSalary || 1000}`;
                document.getElementById('diceCount').textContent = `${playerData.diceCount || 0}/5`;
                document.getElementById('propertyCount').textContent = (playerData.properties || []).length;
                document.getElementById('skillCardCount').textContent = (playerData.skillCards || []).length;
            }
        }
        
        function updatePlayerPosition(newPosition) {
            document.getElementById('playerPosition').textContent = getBoardSpaceName(newPosition);
            addLog(`üìç ÊÇ®ÁöÑ‰ΩçÁΩÆÊõ¥Êñ∞ÁÇ∫: ${getBoardSpaceName(newPosition)}`, 'info');
        }
        
        function getBoardSpaceName(position) {
            const spaceNames = [
                'Ëµ∑Èªû', 'Âè∞ÂåóÂ∏ÇÂ§ßÂÆâÂçÄ', 'Á§æÂçÄÂü∫Èáë', 'Âè∞ÂåóÂ∏Ç‰ø°Áæ©ÂçÄ', 'Á®ÖÂãô', 
                'Âè∞ÈêµÂè∞ÂåóÁ´ô', 'Âè∞ÂåóÂ∏Ç‰∏≠Â±±ÂçÄ', 'Ê©üÊúÉ', 'Âè∞ÂåóÂ∏ÇÊùæÂ±±ÂçÄ', 'Âè∞ÂåóÂ∏ÇÂ§ßÂêåÂçÄ',
                'Áõ£ÁçÑ', 'Ê°ÉÂúíÂ∏Ç‰∏≠Â£¢ÂçÄ', 'ÈõªÂäõÂÖ¨Âè∏', 'Ê°ÉÂúíÂ∏ÇÂπ≥ÈéÆÂçÄ', 'Ê°ÉÂúíÂ∏ÇÊ°ÉÂúíÂçÄ',
                'Ê°ÉÂúíÊ©üÂ†¥', 'Êñ∞Á´πÂ∏ÇÊù±ÂçÄ', 'Á§æÂçÄÂü∫Èáë', 'Êñ∞Á´πÂ∏ÇÂåóÂçÄ', 'Êñ∞Á´πÁßëÂ≠∏ÂúíÂçÄ',
                'ÂÖçË≤ªÂÅúËªä', 'Âè∞‰∏≠Â∏ÇË•øÂ±ØÂçÄ', 'Ê©üÊúÉ', 'Âè∞‰∏≠Â∏ÇÂçóÂ±ØÂçÄ', 'Âè∞‰∏≠Â∏ÇÂåóÂ±ØÂçÄ',
                'Âè∞ÈêµÂè∞‰∏≠Á´ô', 'Âè∞‰∏≠Â∏Ç‰∏≠ÂçÄ', 'Âè∞‰∏≠Â∏ÇÊù±ÂçÄ', 'Ëá™‰æÜÊ∞¥ÂÖ¨Âè∏', 'Âè∞‰∏≠Â∏ÇÂçóÂçÄ',
                'ÈÄ≤Áõ£ÁçÑ', 'È´òÈõÑÂ∏ÇÂâçÈéÆÂçÄ', 'È´òÈõÑÂ∏ÇËãìÈõÖÂçÄ', 'Á§æÂçÄÂü∫Èáë', 'È´òÈõÑÂ∏ÇÈºìÂ±±ÂçÄ',
                'È´òÈõÑÊ©üÂ†¥', 'Ê©üÊúÉ', 'È´òÈõÑÂ∏ÇÂ∑¶ÁáüÂçÄ', 'Â•¢‰æàÁ®Ö', 'È´òÈõÑÂ∏Ç‰∏âÊ∞ëÂçÄ'
            ];
            return spaceNames[position] || `‰ΩçÁΩÆ ${position}`;
        }
        
        function displayRooms(rooms) {
            if (!rooms || rooms.length === 0) {
                roomsList.innerHTML = '<div style="opacity: 0.7; text-align: center; padding: 20px;">ÁõÆÂâçÊ≤íÊúâÂèØÁî®ÊàøÈñì</div>';
                return;
            }
            
            roomsList.innerHTML = rooms.map(room => {
                const canJoin = room.status === 'waiting' && room.playerCount < room.maxPlayers;
                const buttonStyle = canJoin ? '' : 'opacity: 0.5; cursor: not-allowed;';
                const buttonText = canJoin ? 'Âä†ÂÖ•' : 'ÁÑ°Ê≥ïÂä†ÂÖ•';
                
                return `
                    <div class="room-item">
                        <div class="room-name">${room.name}</div>
                        <div class="room-info">
                            Áé©ÂÆ∂: ${room.playerCount}/${room.maxPlayers} | ÁãÄÊÖã: ${room.status}
                            ${canJoin ? 
                                `<button class="btn" onclick="joinRoomById('${room.id}')" style="float: right; padding: 4px 8px; font-size: 11px; margin-left: 8px;">Âä†ÂÖ•</button>` : 
                                `<span style="float: right; padding: 4px 8px; font-size: 11px; ${buttonStyle}">${buttonText}</span>`
                            }
                        </div>
                        <div style="font-size: 10px; opacity: 0.6; margin-top: 4px;">
                            Êàø‰∏ª: ${room.host} | ID: ${room.id.substring(0, 8)}...
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        // ÈÅäÊà≤Êìç‰ΩúÂáΩÊï∏
        function createPlayer() {
            const playerName = document.getElementById('playerName').value || randomName;
            
            if (!socket || !socket.connected) {
                addLog('‚ùå Ë´ãÂÖàÈÄ£Êé•Âà∞‰º∫ÊúçÂô®', 'error');
                return;
            }
            
            addLog(`üë§ Ê≠£Âú®ÂâµÂª∫Áé©ÂÆ∂: ${playerName}`, 'info');
            socket.emit('authenticate', { name: playerName, avatar: 'default' });
        }
        
        function createRoom() {
            const roomName = document.getElementById('roomName').value || 'Ê∏¨Ë©¶ÊàøÈñì';
            
            if (!currentPlayerId) {
                addLog('‚ùå Ë´ãÂÖàÂâµÂª∫Áé©ÂÆ∂', 'error');
                return;
            }
            
            addLog(`üè† Ê≠£Âú®ÂâµÂª∫ÊàøÈñì: ${roomName}`, 'info');
            socket.emit('create_room', {
                name: roomName,
                maxPlayers: 4,
                settings: { startingMoney: 1500 }
            });
        }
        
        function startGame() {
            if (!currentRoomId) {
                addLog('‚ùå Ë´ãÂÖàÂâµÂª∫ÊàñÂä†ÂÖ•ÊàøÈñì', 'error');
                return;
            }
            
            addLog('üéÆ Ê≠£Âú®ÈñãÂßãÈÅäÊà≤...', 'info');
            socket.emit('start_game', { roomId: currentRoomId });
        }
        
        function rollDice() {
            if (!isMyTurn) {
                addLog('‚ùå ÈÇÑÊ≤íËº™Âà∞‰Ω†', 'error');
                return;
            }
            
            addLog('üé≤ Êì≤È™∞Â≠ê...', 'game');
            socket.emit('game_action', {
                type: 'ROLL_DICE',
                playerId: currentPlayerId
            });
            rollDiceBtn.disabled = true;
        }
        
        function endTurn() {
            if (!isMyTurn) {
                addLog('‚ùå ÈÇÑÊ≤íËº™Âà∞‰Ω†', 'error');
                return;
            }
            
            addLog('‚è≠Ô∏è ÁµêÊùüÂõûÂêà', 'game');
            socket.emit('game_action', {
                type: 'END_TURN',
                playerId: currentPlayerId
            });
            
            isMyTurn = false;
            rollDiceBtn.disabled = true;
            endTurnBtn.disabled = true;
        }
        
        function getRooms() {
            if (socket && socket.connected) {
                socket.emit('get_rooms', {});
            }
        }
        
        function testConnection() {
            if (!socket || !socket.connected) {
                addLog('‚ùå SocketÊú™ÈÄ£Êé•', 'error');
                return;
            }
            
            addLog('üèì ÁôºÈÄÅPingÊ∏¨Ë©¶...', 'info');
            socket.emit('ping', { timestamp: Date.now() });
        }
        
        function reconnect() {
            addLog('üîÑ ÈáçÊñ∞ÈÄ£Êé•‰∏≠...', 'info');
            if (socket) {
                socket.disconnect();
            }
            setTimeout(initSocket, 1000);
        }
        
        function showSkills() {
            addLog('üé¥ ÊäÄËÉΩÂç°ÂäüËÉΩÈñãÁôº‰∏≠...', 'info');
        }
        
        function joinRoom() {
            const roomId = document.getElementById('joinRoomId').value;
            
            if (!roomId || !roomId.trim()) {
                addLog('‚ùå Ë´ãËº∏ÂÖ•ÊàøÈñìID', 'error');
                return;
            }
            
            joinRoomById(roomId.trim());
        }
        
        function joinRoomById(roomId) {
            if (!currentPlayerId) {
                addLog('‚ùå Ë´ãÂÖàÂâµÂª∫Áé©ÂÆ∂', 'error');
                return;
            }
            
            if (!socket || !socket.connected) {
                addLog('‚ùå Ë´ãÂÖàÈÄ£Êé•Âà∞‰º∫ÊúçÂô®', 'error');
                return;
            }
            
            addLog(`üö™ Ê≠£Âú®Âä†ÂÖ•ÊàøÈñì: ${roomId.substring(0, 12)}...`, 'info');
            
            socket.emit('join_room', {
                roomId: roomId
            });
        }
        
        function getGameState() {
            if (socket && socket.connected) {
                socket.emit('get_game_state', {});
            }
        }
        
        function leaveRoom() {
            if (!currentRoomId) {
                addLog('‚ùå ÊÇ®‰∏çÂú®‰ªª‰ΩïÊàøÈñì‰∏≠', 'error');
                return;
            }
            
            if (!socket || !socket.connected) {
                addLog('‚ùå Ë´ãÂÖàÈÄ£Êé•Âà∞‰º∫ÊúçÂô®', 'error');
                return;
            }
            
            addLog('üö™ Ê≠£Âú®Èõ¢ÈñãÊàøÈñì...', 'info');
            socket.emit('leave_room');
        }
        
        // È†ÅÈù¢ËºâÂÖ•ÊôÇÂàùÂßãÂåñ
        window.onload = function() {
            addLog('üåê RichMan Èõ≤Á´ØÁâàÊú¨ÂàùÂßãÂåñÂÆåÊàê', 'info');
            
            if (typeof io !== 'undefined') {
                addLog(`‚úÖ Socket.IO ÁâàÊú¨: ${io.version || 'unknown'}`, 'info');
                setTimeout(initSocket, 1000);
            } else {
                addLog('‚ùå Socket.IO ËºâÂÖ•Â§±Êïó', 'error');
            }
        };
    </script>
</body>
</html>