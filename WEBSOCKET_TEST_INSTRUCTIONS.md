# 🔧 WebSocket 測試問題修復

## ❌ **問題說明**
當您在瀏覽器 Console 中執行 `const socket = io('http://localhost:5000');` 時出現錯誤：
```
Uncaught ReferenceError: io is not defined
```

## ✅ **解決方案**

### **方法 1: 使用專用測試頁面 (最簡單)**

我已經為您創建了一個完整的測試頁面，包含了所有必要的庫和測試功能：

1. **開啟測試頁面**：
   ```
   file:///C:/codeing/richman/test-websocket.html
   ```
   
2. **按照界面操作**：
   - ✅ 自動連接到伺服器
   - 👤 點擊「創建玩家」
   - 🏠 點擊「創建房間」
   - 🎮 點擊「開始遊戲」
   - 🎲 點擊「擲骰子」
   - ⏭️ 點擊「結束回合」

### **方法 2: 修復後的主頁面**

現在主頁面已經包含 Socket.IO 庫，您可以：

1. **訪問主頁面**：
   ```
   http://localhost:5000
   ```

2. **按 F12 開啟開發者工具**

3. **在 Console 中執行**：
   ```javascript
   // 現在這個命令可以正常工作了！
   const socket = io('http://localhost:5000');
   
   // 測試連接
   socket.on('connect', () => {
     console.log('✅ 連接成功！Socket ID:', socket.id);
   });
   ```

### **方法 3: 使用自動化測試腳本**

最快速的測試方法：

```bash
# 啟動伺服器
npm run server

# 開新命令行視窗，執行測試
npm run test:websocket
```

## 🎮 **完整測試流程**

### **使用測試頁面進行完整遊戲測試**：

1. **啟動伺服器**：
   ```bash
   npm run server
   ```

2. **開啟測試頁面**：
   - 在瀏覽器中打開 `file:///C:/codeing/richman/test-websocket.html`
   - 或者雙擊檔案 `C:\codeing\richman\test-websocket.html`

3. **按順序測試**：
   - 🔌 等待連接成功（綠色狀態）
   - 👤 輸入玩家名稱，點擊「創建玩家」
   - 🏠 輸入房間名稱，點擊「創建房間」
   - 🎮 點擊「開始遊戲」
   - 🎲 點擊「擲骰子」（只有輪到您時才能點擊）
   - ⏭️ 點擊「結束回合」

4. **觀察結果**：
   - 📊 頂部顯示 Socket ID、玩家 ID、房間 ID
   - 📋 底部日誌顯示所有遊戲事件
   - 🎯 按鈕會根據遊戲狀態啟用/禁用

## 🔍 **測試頁面功能**

### **即時狀態顯示**：
- 🟢 連接狀態（連接中/已連接/錯誤）
- 📊 實時統計（Socket ID、玩家 ID、房間 ID、遊戲階段）
- 📋 詳細事件日誌

### **互動功能**：
- 👤 創建玩家（自定義名稱）
- 🏠 創建房間（自定義名稱）
- 🎮 開始遊戲
- 🎲 擲骰子（回合制）
- ⏭️ 結束回合
- 🧹 清除日誌

### **自動功能**：
- 🔄 自動重連
- 📱 響應式設計
- 🎨 美觀的 UI
- 📋 詳細的錯誤提示

## 🚨 **故障排除**

### **如果測試頁面無法載入**：
1. 確認檔案路徑正確：`C:\codeing\richman\test-websocket.html`
2. 嘗試用不同瀏覽器打開
3. 檢查是否有防火牆阻擋

### **如果無法連接到伺服器**：
1. 確認伺服器正在運行：`npm run server`
2. 檢查端口 5000 是否被占用
3. 查看瀏覽器開發者工具的錯誤信息

### **如果遊戲無法正常進行**：
1. 按順序執行：創建玩家 → 創建房間 → 開始遊戲
2. 查看日誌中的錯誤信息
3. 重新整理頁面重新開始

## 🎯 **建議測試順序**

1. **基礎連接測試** → 使用測試頁面
2. **API 功能測試** → `npm run test:api`
3. **單人遊戲測試** → `npm run test:websocket`
4. **多人遊戲測試** → `npm run test:websocket:multi`

---

**💡 提示**：測試頁面是最直觀的測試方法，強烈建議從這裡開始！